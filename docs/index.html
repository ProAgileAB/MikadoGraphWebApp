<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><title>Title</title></head><body> <button onclick="getFile(render)">Choose Mikado file (.mikado)</button> <script type="module">var e;e=function(){function e(t,r,n,a){this.message=t,this.expected=r,this.found=n,this.location=a,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,e)}return function(e,t){function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r}(e,Error),e.buildMessage=function(e,t){var r,n={literal:function(e){return'"'+o(e.text)+'"'},class:function(e){var t,r="";for(t=0;t<e.parts.length;t++)r+=e.parts[t]instanceof Array?c(e.parts[t][0])+"-"+c(e.parts[t][1]):c(e.parts[t]);return"["+(e.inverted?"^":"")+r+"]"},any:function(e){return"any character"},end:function(e){return"end of input"},other:function(e){return e.description}};function a(e){return e.charCodeAt(0).toString(16).toUpperCase()}function o(e){return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(e){return"\\x0"+a(e)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(e){return"\\x"+a(e)}))}function c(e){return e.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(e){return"\\x0"+a(e)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(e){return"\\x"+a(e)}))}return"Expected "+function(e){var t,r,a,o=new Array(e.length);for(t=0;t<e.length;t++)o[t]=(a=e[t],n[a.type](a));if(o.sort(),o.length>0){for(t=1,r=1;t<o.length;t++)o[t-1]!==o[t]&&(o[r]=o[t],r++);o.length=r}switch(o.length){case 1:return o[0];case 2:return o[0]+" or "+o[1];default:return o.slice(0,-1).join(", ")+", or "+o[o.length-1]}}(e)+" but "+(((r=t)?'"'+o(r)+'"':"end of input")+" found.")},{SyntaxError:e,parse:function(t,r){r=void 0!==r?r:{};var n,a={},o={Expression:B},c=B,i="Goal",u=Z("Goal",!1),l=" needs ",s=Z(" needs ",!1),f="Done: ",p=Z("Done: ",!1),h="\n",g=Z("\n",!1),d=", ",x=Z(", ",!1),A=function(e,t){return t},v=/^[a-zA-Z]/,y=j([["a","z"],["A","Z"]],!1,!1),w=/^[()a-zA-Z ">=.+]/,m=j(["(",")",["a","z"],["A","Z"]," ",'"',">","=",".","+"],!1,!1),b=k("whitespace"),F=/^[ \t\n\r]/,C=j([" ","\t","\n","\r"],!1,!1),E=0,G=[{line:1,column:1}],S=0,z=[],R=0;if("startRule"in r){if(!(r.startRule in o))throw new Error("Can't start parsing from rule \""+r.startRule+'".');c=o[r.startRule]}function Z(e,t){return{type:"literal",text:e,ignoreCase:t}}function j(e,t,r){return{type:"class",parts:e,inverted:t,ignoreCase:r}}function k(e){return{type:"other",description:e}}function T(e){var r,n=G[e];if(n)return n;for(r=e-1;!G[r];)r--;for(n={line:(n=G[r]).line,column:n.column};r<e;)10===t.charCodeAt(r)?(n.line++,n.column=1):n.column++,r++;return G[e]=n,n}function D(e,t){var r=T(e),n=T(t);return{start:{offset:e,line:r.line,column:r.column},end:{offset:t,line:n.line,column:n.column}}}function I(e){E<S||(E>S&&(S=E,z=[]),z.push(e))}function M(t,r,n){return new e(e.buildMessage(t,r),t,r,n)}function B(){var e,t;if(e=[],(t=N())===a&&(t=O())===a&&(t=P()),t!==a)for(;t!==a;)e.push(t),(t=N())===a&&(t=O())===a&&(t=P());else e=a;return e}function N(){var e,r,n;return e=E,t.substr(E,4)===i?(r=i,E+=4):(r=a,0===R&&I(u)),r!==a&&(n=$())!==a?(e,e=r={goal:n}):(E=e,e=a),e}function O(){var e,r,n,o,c;return e=E,r=function(){var e,r,n,o,c,i;if(e=E,(r=U())!==a){for(n=[],o=E,t.substr(E,2)===d?(c=d,E+=2):(c=a,0===R&&I(x)),c!==a&&(i=U())!==a?(o,o=c=A(0,i)):(E=o,o=a);o!==a;)n.push(o),o=E,t.substr(E,2)===d?(c=d,E+=2):(c=a,0===R&&I(x)),c!==a&&(i=U())!==a?(o,o=c=A(0,i)):(E=o,o=a);n!==a?(e,u=r,(l=n).push(u),e=r=l):(E=e,e=a)}else E=e,e=a;var u,l;return e}(),r!==a?(t.substr(E,7)===l?(n=l,E+=7):(n=a,0===R&&I(s)),n!==a&&(o=U())!==a&&(c=$())!==a?(e,e=r={steps:r,needs:o,text:c}):(E=e,e=a)):(E=e,e=a),e}function P(){var e,r,n,o,c;if(e=E,t.substr(E,6)===f?(r=f,E+=6):(r=a,0===R&&I(p)),r!==a)if((n=U())!==a){for(o=[],10===t.charCodeAt(E)?(c=h,E++):(c=a,0===R&&I(g));c!==a;)o.push(c),10===t.charCodeAt(E)?(c=h,E++):(c=a,0===R&&I(g));o!==a?(e,e=r={done:n}):(E=e,e=a)}else E=e,e=a;else E=e,e=a;return e}function U(){var e,r,n;if(e=E,r=[],v.test(t.charAt(E))?(n=t.charAt(E),E++):(n=a,0===R&&I(y)),n!==a)for(;n!==a;)r.push(n),v.test(t.charAt(E))?(n=t.charAt(E),E++):(n=a,0===R&&I(y));else r=a;return r!==a&&(e,r=r.join("")),e=r}function $(){var e,r,n,o,c;if(e=E,10===t.charCodeAt(E)?(r=h,E++):(r=a,0===R&&I(g)),r!==a)if(n=function(){var e,r;R++,e=[],F.test(t.charAt(E))?(r=t.charAt(E),E++):(r=a,0===R&&I(C));for(;r!==a;)e.push(r),F.test(t.charAt(E))?(r=t.charAt(E),E++):(r=a,0===R&&I(C));R--,e===a&&(r=a,0===R&&I(b));return e}(),n!==a){if(o=[],w.test(t.charAt(E))?(c=t.charAt(E),E++):(c=a,0===R&&I(m)),c!==a)for(;c!==a;)o.push(c),w.test(t.charAt(E))?(c=t.charAt(E),E++):(c=a,0===R&&I(m));else o=a;o!==a?(10===t.charCodeAt(E)?(c=h,E++):(c=a,0===R&&I(g)),c!==a?(e,e=r=o.join("")):(E=e,e=a)):(E=e,e=a)}else E=e,e=a;else E=e,e=a;return e}if((n=c())!==a&&E===t.length)return n;throw n!==a&&E<t.length&&I({type:"end"}),M(z,S<t.length?t.charAt(S):null,S<t.length?D(S,S+1):D(S,S))}}}();var t;function r(e){document.getElementById("editor").innerText=e}t={translate:function(e){const t=e[0].goal;return void 0===t?'digraph G {\n   end [shape=tripleoctagon, label="Need a Goal node!", style=filled, fillcolor=red];\n}\n':`digraph G {\n   end [peripheries=2, shape=oval, label="${t}", style=filled, fillcolor=lightblue];\n}`}},window.getFile=async function(n){try{let[a]=await window.showOpenFilePicker();setInterval((()=>{!async function(r,n){let a=await r.getFile(),o=await a.text();const c=(0,e.parse)(o);n((0,t.translate)(c))}(a,n||r)}),500)}catch(e){}};</script> <script src="//d3js.org/d3.v5.min.js"></script> <script src="https://unpkg.com/@hpcc-js/wasm@0.3.11/dist/index.min.js"></script> <script src="https://unpkg.com/d3-graphviz@3.0.5/build/d3-graphviz.js"></script> <div id="graph" style="text-align:center"></div> <script>const graphviz=d3.select("#graph").graphviz();function render(r){graphviz.renderDot(r)}</script> </body></html>